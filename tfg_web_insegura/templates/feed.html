<link rel="stylesheet" href="../static/feed.css">
<h2>Bienvenido, {{ usuario }}</h2>
<h3>Últimas publicaciones</h3>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="buscar-usuario">
  <form action="{{ url_for('buscar') }}" method="get">
    <button type="submit">🔍 Buscar usuario</button>
  </form>
</div>

{% if error %}
  <div class="alert alert-danger" role="alert">
    {{ error }}
  </div>
{% endif %}

{% if success %}
  <div class="alert alert-success" role="alert">
    {{ success }}
  </div>
{% endif %}

{% set ultimo_post = None %}
{% for post_id, post in posts %}
  <div class="post-card">
    <p><strong>{{ post.autor }}</strong> publicó:</p>
    <p>{{ post.contenido }}</p>
    <a href="{{ url_for('seleccionar_post', post_id=post_id) }}">💬 Comentar</a>
    <p class="fecha">{{ post.fecha }}</p>
    <hr>
    {% if post.comentarios %}
      <strong>Comentarios:</strong>
      {% for c in post.comentarios %}
        <p><strong>{{ c.autor }}</strong> comentó:</p>
        <p>{{ c.texto }}</p>
        <p class="fecha">{{ c.fecha }}</p>
      {% endfor %}
    {% else %}
      <p><em>No hay comentarios aún.</em></p>
    {% endif %}
  </div>
{% endfor %}


<footer class="footer">
  <div class="footer-container">
    <a href="{{ url_for('login') }}">Cerrar sesión</a>
    <a href="{{ url_for('enviar_mensaje') }}">Enviar mensaje</a>
    <a href="{{ url_for('publicar') }}">Subir publicación</a>
    <a href="{{ url_for('mensajes') }}">Ver mensajes</a>
  </div>
</footer>
